# Specification: RequestedDialogType
module: requested_dialog_type
crate: rustgram-requested-dialog-type
tdlib_reference: references/td/td/telegram/RequestedDialogType.h
complexity: LOW
module_type: Simple Enum
estimated_loc: 300-500
estimated_tests: 40-50

types:
  - name: RequestedDialogType
    description: |
      Type of dialog requested from a user via keyboard button.
      
      Used when a bot requests the user to select a chat (user, group, or channel)
      to share with the bot. Contains validation rules for the selected dialog.
    fields:
      - name: type
        type: DialogType
        description: The type of dialog (User, Group, Channel)
        optional: false
      - name: button_id
        type: i32
        description: Button identifier for tracking the request
        optional: false
      - name: max_quantity
        type: i32
        description: Maximum number of dialogs that can be selected (User only)
        optional: false
      - name: restrict_is_bot
        type: bool
        description: Whether to restrict to bot users (User only)
        optional: false
      - name: is_bot
        type: bool
        description: Whether the user must be a bot (User only)
        optional: false
      - name: restrict_is_premium
        type: bool
        description: Whether to restrict to premium users (User only)
        optional: false
      - name: is_premium
        type: bool
        description: Whether the user must have premium (User only)
        optional: false
      - name: request_name
        type: bool
        description: Whether to request the name
        optional: false
      - name: request_username
        type: bool
        description: Whether to request the username
        optional: false
      - name: request_photo
        type: bool
        description: Whether to request the photo
        optional: false
      - name: restrict_is_forum
        type: bool
        description: Whether to restrict to forum groups (Group only)
        optional: false
      - name: is_forum
        type: bool
        description: Whether the group must be a forum (Group only)
        optional: false
      - name: bot_is_participant
        type: bool
        description: Whether bot must be a participant (Group only)
        optional: false
      - name: restrict_has_username
        type: bool
        description: Whether to restrict to groups/channels with username (Group/Channel only)
        optional: false
      - name: has_username
        type: bool
        description: Whether the group/channel must have a username (Group/Channel only)
        optional: false
      - name: is_created
        type: bool
        description: Whether the group/channel must be created by the user (Group/Channel only)
        optional: false

external_dependencies:
  - type: AdministratorRights
    crate: rustgram-administrator-rights
    verified: false # STUB NEEDED
  - type: DialogId
    crate: rustgram-dialog-id
    constructor: new()
    verified: true

constructors:
  - name: new_user
    description: Creates a new user dialog request type
    returns: Self
  - name: new_group
    description: Creates a new group dialog request type
    returns: Self
  - name: new_channel
    description: Creates a new channel dialog request type
    returns: Self
  - name: default
    description: Creates a default user dialog request
    returns: Self

methods:
  - name: get_button_id
    description: Returns the button ID
    returns: i32
  - name: get_type
    description: Returns the dialog type
    returns: DialogType

traits:
  - Debug
  - Clone
  - PartialEq
  - Eq
  - Serialize
  - Deserialize

test_plan:
  unit_tests: 40
  doc_tests: 12

notes: |
  This is a complex enum-like type with many optional fields depending on the dialog type.
  Similar to TDLib's RequestedDialogType but simplified for Rust.
  AdministratorRights is used for user/bot_administrator_rights fields but is not yet implemented.
  Create stub for AdministratorRights if needed.
